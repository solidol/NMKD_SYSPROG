<!DOCTYPE html>
<html>
<head>
	<title>Системне програмування. Лекція № 3</title>
	<meta charset="utf-8">
	<link rel="stylesheet" type="text/css" href="style.css">

</head>
<body>
	<div class="paper">
		<div id="colontitle">Системне програмування. Лекція № 3</div>
		<h1>ОРГАНІЗАЦІЯ ВВЕДЕННЯ-ВИВЕДЕННЯ ДАНИХ</h1>
		<h2>Потокове введення-виведення</h2>
		<p>У мові C++ дії, що пов'язані з операціями введення і виве­дення, виконуються за допомогою функцій бібліотек. Функції ведення і виведення бібліотек мови дозволяють читати дані з файлів та пристроїв і писати дані у файли і на пристрої.
		</p>

		<p>Бібліотека мови C++ підтримує три рівня введення-виведення даних:
		</p>

		<ul>
			<li>введення-виведення потоку;</li>
			<li>введення-виведення нижнього рівня;</li>
			<li>введення-виведення для консолі і порту.</li>
		</ul>
		<p>При введенні-виведенні потоку всі дані розглядаються як потік окремих байтів. Для користувача потік — це файл на дис­ку або фізичний пристрій, наприклад, дисплей чи клавіатура, або пристрій для друку, з якого чи на який направляється потік даних. Операції введення-виведення для потоку дозволяють об­робляти дані різних розмірів і форматів від одиночного символу до великих структур даних. Програміст може використовувати функції бібліотеки, розробляти власні і включати їх у бібліоте­ку. Для доступу до бібліотеки цих класів треба включити в програму відповідні заголовні файли.
		</p>

		<p>За замовчуванням стандартні введення і виведення повідомлень про помилки відносяться до консолі користувача (клавіатури та екрана). Це означає, що завжди, коли програма очікує введення зі стандартного потоку, дані повинні надходити з клавіатури, а якщо програма виводить дані — то на екран.
		</p>

		<p>У мові C++ існує декілька бібліотек, які містять засоби введення-виведення, наприклад:<strong>stdio.h, iostream.h.</strong> Найчастіше застосовують потокове введення-виведення даних, операції яко­го включені до складу класів <strong>istream</strong> або <strong>iostream</strong>. Доступ до бібліотеки цих класів здійснюється за допомогою використання у програмі директиви компілятора <strong>#include &lt;iostream.h&gt;</strong>.
		</p>

		<p><strong>Для потокового введення даних</strong> вказується операція «<strong>&gt;&gt;</strong>» («читати з»). Це перевантажена операція, визначена для всіх простих типів і покажчика на <strong>char</strong>. Стандартним потоком введення є <strong>cin</strong>.
		</p>

		<p>Формат запису операції введення має вигляд:
		</p>

		<pre><strong>сin [&gt;&gt; values]; </strong></pre>
		<p>де <strong>values</strong> — змінна.
		</p>

		<p>Так, для введення значень змінних<strong> х і у</strong> можна записати:
		</p>

		<pre>
сin &gt;&gt; х &gt;&gt; у;
	</pre>
		<p>Кожна операція «&gt;&gt;» передбачає введення одного значення. При такому введенні даних необхідно дотримуватись конкретних вимог:
		</p>

		<ul>
			<li>для послідовного введення декількох чисел їх слід розділяти символом пропуску (« ») або <strong>Enter</strong> (дані типу <strong>char</strong> роздiляти пропуском необов'язково);</li>
			<li>якщо послідовно вводиться символ і число (або навпаки), пропуск треба записувати тільки в тому випадку, коли символ (типу <strong>char</strong>) є цифрою;</li>
			<li>потік введення ігнорує пропуски;</li>
			<li>для введення великої кількості даних одним оператором їх можна розташовувати в декількох рядках (використовуючи Enter);</li>
			<li>операція введення з потоку припиняє свою роботу тоді, коли всі включені до нього змінні одержують значення. Наприклад, для операції введення<strong> х і у</strong>, що вказана вище, можна ввести значення <strong>х та у</strong> таким чином:</li>
		</ul>
		<pre>
2.345 789 (Enter)
або   
2.345 (Enter)
789 (Enter)
		</pre>

		<p>Оскільки в цьому прикладі пропуск є роздільником між значеннями, що вводяться, то при введенні рядків, котрі мiстять пропуски у своєму складі, цей оператор не використовується. У такому випадку треба застосовувати функції <strong>getline(), get()</strong> тощо. У мові C++ бажано здійснювати потокові введення-виведення даних.
		</p>

		<p>Для потокового виведення даних необхідна операція <strong>«&lt;&lt;»</strong> («записати в»), що використовується разом з ім'ям вихідного потоку <strong>cout</strong>. Наприклад, вираз
		</p>

		<pre>
cout &lt;&lt; х;
		</pre>
		<p>означає виведення значення змінної <strong>х </strong>(або запис у потік). Ця операція вибирає необхідну функцію перетворення даних у потік байтів.
		</p>

		<p>Формат запису операції виведення представляється як: <code>cout &lt;&lt; data [&lt;&lt; data1];</code>
		</p>

		<p>де <strong>data, data1</strong> — це змінні, константи, вирази тощо.
		</p>

		<p>Потокова операція виведення може мати вигляд:
			<code>cout &lt;&lt; "у =” &lt;&lt; x + а &#8211; sin(x) &lt;&lt; "\n";.</code>

		</p>

		<p>Застосовуючи логічні операції, вирази треба брати в дужки:
			<code>cout &lt;&lt; "р =" &lt;&lt; (а &amp;&amp; b || с) &lt;&lt; "\n";.</code>
		</p>

		<p>Символ переведення на наступний рядок записується як рядкова константа, тобто <code>"\n"</code>, інакше він розглядається не як символ керуючої послідовності, а як число 10 (код символу). Таких помилок можна уникнути шляхом присвоювання значення ке­руючих символів змінним, тобто:
			
		</p>

		<pre>
#define &lt;&lt; sp " "
#define &lt;&lt; ht "\t"
#define &lt;&lt; hl "\n".
		</pre>
		<p>Тепер операцію виведення можна здійснити так:
			<strong>cout &lt;&lt; "у =" &lt;&lt; x + а &#8211; sin(x)&lt;&lt; hl;</strong> .
			
		</p>

		<p>Слід пам'ятати, що  при виведенні даних з використанням «cout &lt;&lt;»  не виконується автоматичний перехід на наступ­ний рядок, для реалізації такого переходу застосовується так переведення рядка "\n" або  операція endl. Тобто, вивести рядкову константу можна, наприклад, так:
			
		</p>

		<pre>
cout &lt;&lt; "О деле суди по исходу \n";
		</pre>

		<pre>або   cout &lt;&lt; "О деле суди по исходу" &lt;&lt; endl;.
		</pre>

		<p>Приклад 4.1. Написати програму, що містить організацію виведення даних, пояснювальні повідомлення, а також символи переведен­ия рядка.
			
		</p>

		<pre>
/* Р4_1.СРР — печать значений переменных с соответствующими пометками */
#include &lt;iostream.h&gt;
#include &lt;conio.h&gt;
int main()
{
	char first = 'W';
	char middle = 'P';
	char last = 'S'; 
	int wozrast = 20; 
	int doplata = 2;
	float zarplata = 309.75; 
	float prozent = 8.5;
	//---------------- вывод результатов
	cout &lt;&lt; "Проверка исходных данных\n";
	cout &lt;&lt; first &lt;&lt; middle &lt;&lt; last &lt;&lt; "\n\n";
	cout &lt;&lt; "Возраст доплата зарплата процент:\n";
	cout &lt;&lt; " " &lt;&lt; wozrast &lt;&lt; " " &lt;&lt; doplata &lt;&lt; " " &lt;&lt; zarplata &lt;&lt; " " &lt;&lt; prozent;
	getch ();
}
		</pre>
		<p>В останніх двох операціях виведеня програми можна використати символи табуляції. Наприклад, <strong>«\t»</strong> поміщає кожне наступне ім'я або число в наступну позицію табуляції (через вісім символів), у цьому випадку маємо:
			
		</p>

		<pre>
cout &lt;&lt; "Возраст \t доплата\t зарплата\t процент\t \n";<
cout &lt;&lt; wozrast &lt;&lt; "\t" &lt;&lt; doplata &lt;&lt; "\t" &lt;&lt; zarplata &lt;&lt; "\t" &lt;&lt; prozent &lt;&lt; "\n";
		</pre>

		<p>Для додаткового керування даними, що виводяться, використовують маніпулятори <strong>setw(w)</strong> та <strong>setprecision(d)</strong>. Маніпулятор <strong>setw(w)</strong>призначений для зазначення довжини поля, що виділяється для виведення даних (<strong>w</strong> — кількість позицій). Маніпуля­тор <strong>setprecision(d)</strong> визначає кількість позицій у дробовій частині дійсних чисел.
		</p>

		<p>Маніпулятори змінюють вигляд деяких змінних в об'єкті <strong>cout</strong>, що у потоці розташовані за ними. Ці маніпулятори нази­вають прапорцями стану. Коли об'єкт посилає дані на екран, він перевіряє прапорці, щоб довідатися, як виконати завдання, наприклад, запис:
		</p>

		<p><code>cout &lt;&lt; 456 &lt;&lt; 789 &lt;&lt; 123;</code>

		</p>

		<p>призводить до виведення значення у вигляді: <strong>456789123</strong>, що ускладнює визначення групи значень.
		</p>

		<p><strong>Приклад 4.2.</strong> Написати програму, використовуючи маніпулятор <strong>setw()</strong>.
		</p>

		<pre>
// P4J2.CPP — использование манипулятора setw()
#include &lt;iostream.h&gt;
#include &lt;iomanip.h&gt;
#include &lt;conio.h&gt;
main ( )
{
	cout &lt;&lt; 456 &lt;&lt; 789 &lt;&lt; 123 &lt;&lt; endl;
	cout &lt;&lt; setw(5) &lt;&lt; 456 &lt;&lt; setw(5) &lt;&lt; 789 &lt;&lt; setw(5) &lt;&lt; 123 &lt;&lt; endl;
	cout &lt;&lt; setw(7) &lt;&lt; 456 &lt;&lt; setw(7) &lt;&lt; 789 &lt;&lt; setw(7) &lt;&lt; 123 &lt;&lt; endl;
	getch ();
}
		</pre>
		<p>Результати виконання програми:
		</p>

		<pre>
456789123 
456     789     123 
456       789       123
		</pre>
		<p>У цьому прикладі з'явився новий заголовний файл <strong>iomanip.h</strong>, що дозволяє застосовувати функції маніпуляторів. При використанні функції <strong>setw()</strong> число вирівнюється вправо в межах заданої ширини поля виведення. Якщо ширина недостатня, то вказане значення ігнорується.
		</p>

		<p>Функція <strong>setprecision(2)</strong> повідомляє про те, що число з пла­ваючою крапкою виводиться з двома знаками після крапки з округленням дробової частини, наприклад, при виконанні операції
		</p>

		<p><strong>cout &lt;&lt; setw(7) &lt;&lt; setprecision(2) &lt;&lt; 123.456789;</strong>

		</p>

		<p>буде отримано такий результат: <strong>123.46.</strong>
		</p>

		<p>Функції <strong>cout.width(w)</strong> та <strong>cout.precision(d)</strong>, які потребують підключення тільки заголовного файла <strong>iostream.h</strong>, виконують дії, подібні тим, що і функції <strong>setw(w)</strong> та <strong>setprecision(d)</strong>.
		</p>

		<p>Операція введення використовує ті ж самі маніпулятори, що й операція виведення. Список змінних, в які будуть помі­щені дані, визначений у <strong>values</strong>.
		</p>

		<p><strong>Приклад 4.3.</strong> Написати програму обчислення податку на продаж.
		</p>

		<pre>
// Р4_З.СРР — вычисление налога на продажи 
// использование манипулятора setprecision()
#include &lt;iostream.h&gt;
#include &lt;iomanip.h&gt;
#include &lt;conio.h&gt;
main ( )
{ float prod_sum; // prod_sum — сумма продаж
	float nalog;
	//---------------  вывод подсказки для пользователя
	cout &lt;&lt; "Введите сумму продаж";
	cin &gt;&gt; prod_sum;
	//............... вычисление налога на продажу
	nalog = prod_sum* 0.7;
	cout &lt;&lt; " " &lt;&lt; setprecision(2) &lt;&lt; prod_sum;
	cout &lt;&lt; " " &lt;&lt; setprecision(2) &lt;&lt; nalog &lt;&lt; "\n";
	getch(); // задержка экрана
	return 0;
}
		</pre>
		<p>Унаслідок того, що у першому операторі <strong>cout</strong> відсутня інструкція переведення рядка, відповідь користувача на підказку (тобто введене значення змінної <strong>prod_sum</strong>) з'явиться відразу праворуч за самою підказкою.

		</p>




		<h2>Форматоване введення-виведення</h2>


		<p>Форматоване введення-виведення величин здійснюється з використанням функцій <strong>scanf</strong> та <strong>printf</strong>, які успадковані з мови С. Щоб зв'язати програму користувача зі стандартною бібліотекою, де знаходяться ці функції, необхідно на початку програми включити заголовний файл <strong>stdio.h</strong>.
		</p>

		<p><strong>Функція scanf</strong>, що забезпечує форматоване введення даних, має змінне число параметрів, при цьому перед відповідним параметром ставиться знак <strong>«&amp;»</strong> — символ взяття адреси змінної. Наприклад, <code>&amp;х1</code> означає адресу змінної <strong>х1</strong>, а не значення, яке ця змінна має в даний момент. Рядок форматів функції <strong>scanf</strong> вказує, які дані очікуються на вході. Якщо функція зустрічає у форматному рядку знак <strong>« % »</strong>, за яким розташований знак перетворення, то на вході будуть пропускатися символи, доки не з'явиться деякий непорожній символ.
		</p>

		<p>Форма запису функції <strong>scanf</strong> має вигляд:
		</p>

		<pre>
			scanf ("рядок форматних кодів", список імен змінних); 
		</pre>
		<p>Рядок форматних кодів являє собою таку структуру запису:
		</p>

		<p><strong>%[ * ][довжина][f|n][h|l] тип,</strong>
		</p>

		<p>де <strong>«%»</strong> — ознака початку форматного коду. Якщо за символом <strong>«% »</strong> йде символ, що не є символом керування форматом, то він розглядається як звичайна послідовність символів. При цьому наступні за ним символи (до наступного символу <strong>«%»</strong>) також вважаються просто символами; якщо за символом<strong> «%»</strong> йде символ <strong>«*»</strong>, то присвоювання наступного вхідного поля приглушується, поле читається, але не зберігається;
		</p>

		<p><strong>довжина</strong> — позитивне десяткове ціле число, яке задає макси­мальне число символів, що може бути прочитане з вхідного потоку, доки не зустрінеться символ «  » (пропуск) або символ, який не може бути перетворений відповідно до заданого формату;
		</p>

		<p><strong>  f | n</strong> — дозволяють приглушити погодження за замовчуванням про використану модель пам'яті («далека», «близька» пам'ять);
		</p>

		<p><strong>  h | l</strong> — предикати, що визначають відповідно аргументи типів <strong>short і long</strong>;
		</p>

		<p><strong>  тип</strong> — задається одним із символів: <strong>d</strong> — десяткове ціле;<strong> і</strong> — десяткове, вісімкове чи шістнадцяткове ціле зі знаком; <strong>с</strong> — одиночний символ;<strong>u</strong> — беззнакове десяткове число; <strong>х, X</strong> — беззнакове шістнадцяткове число; <strong>0</strong> — вісімкове число; <strong>s</strong> — сприймає символи без перетворення до символу <strong>«\n»</strong> або пропуску, доки не буде досягнута задана довжина (при виведенні видає до пото­ку всі символи до символу<strong> «\0»</strong> або до досягнення специфікованої точності); <strong>f, F</strong> — значення з плаваючою крапкою; <strong>е, Е</strong> — значення у експоненціальній формі; <strong>G, g</strong> — значення зі знаком у формі <strong>f</strong> або <strong>е</strong>.
		</p>

		<p>Аргументи у функції <strong>scanf</strong> мають бути записані у формі покажчиків, тобто у вигляді <strong>&amp;х, &amp;у, &amp;mas[i]</strong> тощо. Для введен­ня змінних <strong>k</strong> (типу <strong>int</strong>) і <strong>р</strong> (типу <strong>float</strong>) цю функцію можна за­писати так:
		</p>

		<p><strong>scanf(" %d  %f   \n ”, &amp;k, &amp;р);.</strong>
		</p>

		<p><strong>Приклад 4.4.</strong> Ввести два числа та обчислити їх суму.
		</p>

		<pre>// Р4 4.СРР — ввод двух чисел и вычисление их суммы
#include &lt;stdio.h&gt;
#include &lt;conio.h&gt;
main( )
{ int a, b, c; 
	scanf ( " %d  %d",&amp;a,&amp;b);     //ввод чисел 5 и 8
	с = a + b;
	printf ("Summa =%d \n", c); 
	getch();      //задержка экрана
}
		</pre>
		<p>У результаті виконання програми буде виведено: <strong>Summa=13</strong>.
		</p>

		<p>Форматний рядок наказує функції <strong>scanf</strong> ввести десяткове число, яке треба помістити в змінну <strong>а</strong>, а потім перейти до на­ступного не порожнього символу і з цього моменту почати вве­дення нового десяткового числа, яке потім присвоюється змін­ній <strong>b</strong>. Якщо за рядком керування форматом аргументів більше, ніж специфікацій формату, зайві аргументи ігноруються. Ко­ли для специфікацій формату недостатньо аргументів, резуль­тат не визначений.
		</p>

		<p>У наведеному фрагменті програми для форматованого виведення даних використовується функція <strong>printf</strong>.
		</p>

		<p><strong>Функція printf</strong> може використовуватися, наприклад, для виведення повідомлення на екран:
		</p>

		<pre><strong>printf ("Введите исходные данные \n");</strong></pre>
		<p>Для звертання до функції використовуються параметри, якi розташовані у круглих дужках. Найчастіше функція <strong>printf</strong> реалізується для виведення значень змінних. Першим аргументом у звертанні до функції ставиться рядок форматів (береться в лапки), а наступними, якщо вони є, — об'єкти, що виводяться.
		</p>

		<p>Рядок форматів може включати звичайні символи, які копіюються при виведенні, і специфікації перетворення, що починаються із символу«% », за специфікаціями йде символ перетворення. Кожна специфікація перетворення відповідає одному з аргументів, що йдуть за форматним рядком, і між ними встановлюється взаємно однозначна відповідність, наприклад:
		</p>

		<p><code>printf ("Значения а, Ь, с равны: %d %d. %d \n", а, b, с);,</code>
		</p>

		<p>тут літера <strong>d</strong> у специфікації перетворення вказує, що значення аргументу має бути представлено як десяткове ціле число.
		</p>

		<p>При виведенні функція <strong>printf</strong> використовує ті самі специ­фікації, що і функція <strong>scanf</strong> при введенні. Наприклад, у функ­ції <strong>printf</strong> вигляду
		</p>

		<p><code>printf (" % с=%d \n", g, g);</code>
		</p>

		<p>значення змінної <strong>g</strong> виводиться як символ алфавіту, а після зна­ка «=» — як числове значення. Перед символом перетворення може стояти числовий коефіцієнт, що вказує кількість позицій у виведеному рядку, відведених для елемента виведення. Список форматних кодів має таку форму запису:
		</p>

		<pre>
			% [прапорець] [довжина] [точність] [f | n] [h | l] тип ,
		</pre>
		<p>де <strong>прапорець</strong> — символ, що керує вирівнюванням виведення і виведенням пропусків, десяткової крапки, ознак чисел вісімкової і шістнадцяткової систем числення. <strong>Прапорець</strong> може за­даватися одним із символів:
		</p>

		<ul>
			<li><strong>  «-»</strong> — вирівнювання вліво усередині заданого поля;</li>
			<li><strong>  «+»</strong> — виведення знака числа;</li>
			<li><strong>  « » </strong>(пропуск) — приєднання пропуску до виведеного числа, якщо число є додатним і має тип зі знаком;</li>
			<li><strong>  «#» </strong>— виводиться ідентифікатор системи числення для цілих: <strong>0</strong> — для вісімкових чисел, <strong>0х</strong> чи <strong>0Х</strong> — для шістнадцяткових чисел;</li>
		</ul>
		<p><strong>довжина</strong> — визначає мінімальну кількість виведених символiв, якщо довжина більше виведеної кількості символів, то ви­ведене значення доповнюється пропусками, у випадку, коли довжина менше кількості символів у виведеному значенні або вона не задана, виводяться всі символи значення (відповідно до поля точність, якщо воно є);

		</p>

		<p><strong>точність</strong> — задається цілим числом після крапки і визначає кількість виведених символів, кількість знаків після крапки; на відміну від поля довжини поле точність може привести до «зрізання» виведених даних.
		</p>

		<p>Параметри <strong>f, n, h, l</strong> і <strong>тип</strong> списку форматних кодів за зміс­том аналогічні раніше описаним для функції <strong>scanf</strong>.
		</p>

		<p>Виведення результатів з використанням форматних кодів функції <strong>printf</strong> може мати вигляд:
		</p>

		<pre>
printf (" % 3.0 f % 6.1 f \ n ”, х, у);
		</pre>
		<p><strong>Приклад 4.5.</strong> Обчислити значення функції <code>у = ах<sup>2</sup> &#8211; sinx</code>, якщо <code>а =  10,5; х є [-1; 2]; h<sub>x</sub> = 0,5</code>.
		</p>


		<p>Алгоритм розв'язання поставленої задачі розглянуто у <strong>при­кладі 1.1</strong>, а його програмна реалізація матиме такий вигляд:
		</p>

		<pre>// Р45.СРР — использование форматных кодов при выводе
#include &lt;stdio.h&gt;
#include &lt;math.h&gt;
#include &lt;conio.h&gt; 
main( )
{ float x, y, a(10.5); 
	printf ("\t Vivod rezultata\n"); 
	for (x = -1; x &lt;= 2; x += 0.5)
	{ у = a * pow(x,2) - sin(x);     //у = a*x*x - sin(x);
		printf (" \t x = % 4.1f    у = % 6.3f \n", x, y);
	}
	getch ();      //задержка экрана
}
		</pre>
		<p>Результати обчислення:
		</p>

		<pre>
Vivod rezultata
x = -1.0 у =11.342
х = -0.5 у = 3.104
х = 0.0  у = 0.000
х = 0.5  у = 2.146
х = 1.0  у = 9.659
х = 1.5  у = 22.628
х = 2.0  у = 41.091
		</pre>


		<h2>Контрольні запитання</h2>
		<ol>




			<li>Як забезпечується організація введення даних на С++?</li>

			<li>Як здійснюється виведення результатів на С++?</li>

			<li>Як реалізується потокове введення даних «сіn>>»? Наведiть приклади.</li>

			<li>Охарактеризуйте основні аспекти використання потокового ви ведення даних «соut<<».</li>

			<li>Що таке форматоване введення-виведення даних?</li>

			<li>Поясніть правила застосування функції scanf.</li>

			<li>Як здійснює роботу функція printf?</li>


		</ol>
	</div>
</body>
</html>